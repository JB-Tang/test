# 前端渲染十万条数据
## 简介
1. 场景介绍：有些时候，后端直接将大量的数据传给前端，没有使用分页。如果前端直接将大量的数据渲染到页面，那么，可以想象的是，渲染的时间将会很长。
2. 解决方案：使用虚拟列表解决这一问题
## 原理
1. 虚拟列表原理：其实就是按需显示的一种实现，只对可见区域进行渲染，对非可见区域中的数据不渲染或者部分渲染的技术
2. 在首屏加载时，只加载可视区域需要的列表项，当滚动发生时，动态计算可视区域需要的列表项，并将非可视区域内存在的列表项删除。
3. 优化：
  * 为了避免出现滚动时出现白屏的现象，可以在列表项的开头和结尾多取部分数据
  * 本文介绍的滚动方法是通过监听onScroll，实际还可以使用IntersectionObserver替换监听scroll事件
## 实现方法
1. 列表高度固定
  * 步骤
    * 根据屏幕高度和列表项高度计算出一屏中可以展示的数量
    * 滚动时监听滚动的偏移量，根据列表项高度计算出屏幕中当前开始的列表项
    * 根据屏幕展示的数量计算出屏幕底部的列表项
    * 页面渲染开始项到结束项的数据，其他数据移除
  * 注意
    * 展示的数据和实际的数据放在两个数组中，页面只渲染需要展示的数据
2. 列表高度不固定，随内容变化（以预估高度先行渲染，然后获取真实高度并缓存）
  * 步骤
    * 定义一个预估的列表项高度，根据这个高度预估页面中展示多少个列表项
    * 初始时定义一个position来存储列表项每一项的高度以及位置信息
    * 页面update时获取真实元素大小，修改列表项对应的高度和位置信息
* 注：详细可参考网址2
## 参考网址
1. [渲染十万条数据就把你卡住了？不存在的](https://juejin.cn/post/7110588879060598820)
2. [「前端进阶」高性能渲染十万条数据(虚拟列表)](https://blog.csdn.net/weixin_42232325/article/details/122560039)